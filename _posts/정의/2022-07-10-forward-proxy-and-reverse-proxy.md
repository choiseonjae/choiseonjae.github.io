---
title: \[κ°λ…] ν¬μ›λ“ ν”„λ΅μ‹μ™€ λ¦¬λ²„μ¤ ν”„λ΅μ‹μ μ¥λ‹¨μ  λ° μ°¨μ΄ μ •λ¦¬

header:
  teaser: 

categories: difference
   
tags:
   - reverse proxy
   - forward proxy
   - proxy

last_modified_at: 2022-07-10 

---

μΌλ°μ μΌλ΅, λ‚λ” μ°λ¦¬κ°€ μ²λ¦¬ν•μ§€ μ•κ³  μ²λ¦¬μ— λ€ν• μ‘μ—…μ„ λ‹¤λ¥Έ μ„λ²„μ—κ² λ„κ²¨μ£Όλ” κ²ƒμ„ *β€ν”„λ΅μ‹ν•΄μ¤€λ‹¤.β€* λΌλ” λ¬Έμ¥μΌλ΅ ν‘ν„ν•΄μ™”λ‹¤. ν”„λ΅μ‹μ—λ” ν¬μ›λ“ ν”„λ΅μ‹ / λ¦¬λ²„μ¤ ν”„λ΅μ‹ λ‘κ°€μ§€κ°€ μ΅΄μ¬ν•λ‹¤κ³  ν•λ‹¤.

μ΄ λ‘μ μ°¨μ΄μ— λ€ν•΄ μ •λ¦¬ν•  μμ •μΈλ° κ·Έ μ „μ— λΉ„μ μ μΈ ν‘ν„μΌλ΅ μ΄ λ‘μ„ μ •μν•΄λ³΄μλ©΄ λ‹¤μκ³Ό κ°™λ‹¤.

- ν¬μ›λ“ ν”„λ΅μ‹: `νμ‚¬ / κµ°λ€` λ“± λ³΄μ• λ“±μ„ μ„ν•΄ `νΉμ • μ‚¬μ΄νΈ / μ»¨ν…μΈ μ— μ ‘κ·Ό μ ν•`ν•κΈ° μ„ν•΄ νΉμ • κΈ°κ΄€ / μΈν”„λΌ λ‚΄μ λ„¤νΈμ›ν¬κ°€ `λ°–μΌλ΅ μ”μ²­ν•κΈ° μ„ν•΄ κ±°μ³μ•Ό ν•λ” μ„λ²„`
- λ¦¬λ²„μ¤ ν”„λ΅μ‹: νμ‚¬μ λ„λ©”μΈμΌλ΅ μ¤λ” λ¨λ“  μ”μ²­μ„ λ¨Όμ € λ°›μ•„μ£Όλ” (like nginx, api-gw) μ„λ²„

μ¦‰, ν¬μ›λ“ ν”„λ΅μ‹λ” ν΄λΌμ΄μ–ΈνΈ μ…μ¥μ—μ„ ν΄λΌμ΄μ–ΈνΈ μ”μ²­μ„ ***λ€μ‹  μ”μ²­ν•΄μ£Όλ” μ„λ²„***

λ¦¬λ²„μ¤ ν”„λ΅μ‹λ” μ„λ²„μ μ…μ¥μ—μ„ μ„λ²„ λ€μ‹  λ¨Όμ € ***μ”μ²­μ„ λ°›μ•„μ£Όλ” μ„λ²„***

# ν¬μ›λ“ ν”„λ΅μ‹(Forward Proxy)

**μ‚¬μ©μ**κ°€ [google.com](http://google.com) μ— μ—°κ²°ν•λ ¤κ³  ν•λ©΄ μ‚¬μ©μ PCκ°€ μ—°κ²°ν•λ”κ² μ•„λ‹λΌ ν¬μ›λ“ ν”„λ΅μ‹ μ„λ²„κ°€ μ”μ²­μ„ λ°›μ•„μ„ google.comμ— μ—°κ²°ν•μ—¬ κ·Έ κ²°κ³Όλ¥Ό ν΄λΌμ΄μ–ΈνΌμ— μ „λ‹¬ν•΄μ¤λ‹λ‹¤.

- λ€κ² μΊμ‹± κΈ°λ¥μ΄ μμΌλ―€λ΅ μμ£Ό μ‚¬μ©λλ” μ»¨ν…μΈ λΌλ©΄ μ„±λ¥ ν–¥μƒ κ°€λ¥
- μ •ν•΄μ§„ μ‚¬μ΄νΈλ§ μ—°κ²°ν•λ„λ΅ μ„¤μ • κ°€λ¥
- μ—­μ¶”μ  λ°©μ§€ (IP μ£Όμ†λ¥Ό μ—­μ¶”μ ν•΄λ„ ν”„λ΅μ‹ μ„λ²„λ§ λ³΄μ΄κΈ° λ•λ¬Έ)

![forward_proxy](https://user-images.githubusercontent.com/49507736/178178686-2f6d83b1-dc45-4b9e-b067-e0ed4ea458f7.png)

# λ¦¬λ²„μ¤ ν”„λ΅μ‹ (Reverse Proxy)

νμ‚¬κ°€ exapme.comμ΄λΌλ” κ³ κ°μ© μ›Ή μ„λΉ„μ¤λ¥Ό λ§λ“¤μ—μ„ λ• λ¦¬λ²„μ¤ ν”„λ΅μ‹λ΅ μ›Ή μ„λ²„λ¥Ό μ„¤μ •ν•λ” κ²½μ°, [example.com](http://example.com) λ΅ μ›Ή μ„λΉ„μ¤μ— λ°μ΄ν„°λ¥Ό μ”μ²­ν•λ©΄ reverse proxyκ°€ μ”μ²­μ„ λ°›μ•„μ„ λ‚΄λ¶€ μ„λ²„μ— λ°μ΄ν„°λ¥Ό λ°›μ€ ν›„ μ‚¬μ©μμ—κ² λ‹¤μ‹ μ „λ‹¬ν•κ² λ©λ‹λ‹¤.

![reverse_proxy](https://user-images.githubusercontent.com/49507736/178178680-75831ec6-116c-4f08-8e61-bf9ea89edf1d.png)

## μ¥μ 

1. λ³΄μ•

   κΈ°μ—…μ λ„¤νΈμ›ν¬ ν™κ²½μ€ λΉ„λ¬΄μ¥μ§€λ€(DMZ; Demilitarized Zone)λΌκ³  ν•λ” λ‚΄λ¶€ λ„¤νΈμ›ν¬μ™€ μ™Έλ¶€ λ„¤νΈμ›ν¬ μ‚¬μ΄μ— μ„μΉν•λ” κµ¬κ°„μ΄ μ΅΄μ¬ν•λ‹¤. λ³΄ν†µμ μ›Ή μ„λ²„(WAS)λ” DBMSκΉμ§€ μ—°κ²°λμ–΄ μλ” κ²½μ°κ°€ λ§κΈ° λ•λ¬Έμ— μ„λΉ„μ¤κ°€ ν„Έλ¦¬λ©΄ DBMSμ™€ κ΄€λ ¨ μ„λ²„κΉμ§€ λ¨λ‘ κ°™μ΄ ν„Έλ¦¬λ” μ‹¬κ°ν• λ³΄μ• λ¬Έμ κ°€ λ°μƒν•  μ μλ‹¤.

   μ΄ λ•λ¬Έμ— **DMS μ΅΄μ— μ›Ή μ„λ²„λ¥Ό λ‘κ³  λ¦¬λ²„μ¤ ν”„λ΅μ‹λ΅ μ„¤μ •ν•μ—¬ WASλ” λ‚΄λ¶€λ§μ— μ„μΉμ‹ν‚¨λ‹¤. μ›Ή μ„λ²„κ°€ ν•΄ν‚Ήλ‹Ήν•λ”λΌλ„ 2μ°¨ ν”Όν•΄λ¥Ό μµμ†ν™”** ν•  μ μλ‹¤.

   λ³Έλμ μ„λ²„ IP μ£Όμ†λ¥Ό λ…Έμ¶μ‹ν‚¬ ν•„μ”κ°€ μ—†λ‹¤. DDos κ³µκ²© λ§‰λ”λ° μ μ©ν•μ§€λ§ λ¦¬λ²„μ¤ ν”„λ΅μ‹ μμ²΄κ°€ νƒ€κ²μ΄ λκΈ°λ„ ν•λ‹¤.

2. μ†λ„μ™€ μ•μ •μ„±

   λ¦¬λ²„μ¤ ν”„λ΅μ‹λ¥Ό κµ¬μ„±ν•λ©΄ μ•μ— **μΊμ‹ server / SSL ν•λ“μ›¨μ–΄ κ°€μ†κΈ°λ¥Ό μ—°λ™ν•λ” λ“±μ μ„±λ¥ ν–¥μƒ**μ„ ν•κΈ° μ©μ΄ν•λ‹¤. CDNλ„ λ¦¬λ²„μ¤ ν”„λ΅μ‹λ΅ λ™μ‘ν•λ” μΊμ‹ μ„λ²„μ΄λ‹¤. **CDNμ„ μ—°λ™ν•λ‹¤λ©΄ DDOS κ³µκ²©μ„ ν¨κ³Όμ μΌλ΅ λ°©μ–΄ν•κΈ°λ„ ν•κ³ , κ³µκ²©λ‹Ήν•λ”λΌλ„ CDN μ„λ²„μ—λ§ ν”Όν•΄κ°€ κ°€κΈ° λ•λ¬Έμ— μ•μ •μ μΈ μ΄μ**μ΄ κ°€λ¥ν•λ‹¤.  
   SSL μ•”νΈν™”μ— μΆ‹λ‹¤. μ„λ²„κ°€ ν΄λΌμ΄μ–ΈνΈλ“¤κ³Ό ν†µμ‹ ν•  λ• μ•”νΈν™”, λ³µνΈν™” λΉ„μ©μ΄ λ§μ΄ λ“λ”λ° λ¦¬λ²„μ¤ ν”„λ΅μ‹κ°€ μ΄λ¥Ό μ•”/λ³µνΈν™” μ§„ν–‰ν•΄μ£Όλ©΄ μ„λ²„μ λ¶€λ‹΄(λΉ„μ©)μ΄ μ¤„μ–΄λ“ λ‹¤.

3. μ‹ νμ„± μ¦λ€

   λ¦¬λ²„μ¤ ν”„λ΅μ‹λ¥Ό ν΄λ¬μ¤ν„° κµ¬μ„±μ„ ν•  κ²½μ° κ°€μ©μ„±μ„ λ†’μΌ μ μλ‹¤. μ‚¬μ©μκ°€ μ¦κ°€ν•λ” μƒν™©μ— λ§κ² WASλ¥Ό μ μ—°ν•κ² λλ¦΄ μ μλ” μ¥μ μ΄ μλ‹¤. **λ¦¬λ²„μ¤ ν”„λ΅μ‹ μ•μ— L4, Load Balancerλ¥Ό λ¶™μ΄λ©΄ μƒν™©μ— λ§λ” λ¶„λ°° μ•κ³ λ¦¬μ¦μ„ μ μ©ν•΄ μ„λΉ„μ¤ μ‹ λΆ°μ„±**μ„ λ†’μΌ μ μλ‹¤. νΉμ • μ„λ²„κ°€ κ³Όλ¶€ν™” λμ§€ μ•λ„λ΅ λ΅λ“ λ°Έλ°μ‹± κ°€λ¥.

{% capture content %}
**λ¦¬λ²„μ¤ ν”„λ΅μ‹λ¥Ό μ‚¬μ©ν•  κ²½μ° WASμ—μ„ `REMOTE_ADDR`μ„ κ°€μ Έμ¤λ©΄ Reverse Proxyμ IPλ¥Ό κ°€μ Έμ¤κ² λκΈ° λ•λ¬Έμ— ν”„λ΅μ‹ ν™κ²½μ—μ„λ” client IPλ¥Ό μ–»κΈ° μ„ν•΄μ„ X-Forwarded-For http headerλ¥Ό μ°Ύκ³ ν•΄μ„ XFF ν—¤λ”λ¥Ό μ‚¬μ©**ν•λ©΄ λλ‹¤.
{% endcapture %}

{% include notice--info title="π’΅ νΉμ΄μ‚¬ν•­ " content=content %}
# μ •λ¦¬

## λ‘μ μ°¨μ΄

μ„μ—μ„λ„ μ •λ¦¬ν–μ§€λ§,

- ν¬μ›λ“ ν”„λ΅μ‹: ν΄λΌμ΄μ–ΈνΈ μ•μ— λ†“μ—¬μ Έ μλ‹¤. ν΄λΌμ΄μ–ΈνΈμ™€ μ§μ ‘ ν†µμ‹ ν•λ” μ„λ²„κ°€ μ—†λ‹¤.
- λ¦¬λ²„μ¤ ν”„λ΅μ‹: μ›Ή μ„λ²„ μ•μ— λ†“μ—¬μ Έ μλ‹¤. μ„λ²„μ™€ μ§μ ‘ ν†µμ‹ ν•λ” ν΄λΌμ΄μ–ΈνΈκ°€ μ—†λ‹¤.

λ΅ μ •λ¦¬ν•  μ μλ‹¤.

## μ¥λ‹¨μ 

- ν¬μ›λ“ ν”„λ΅μ‹
  - μ‚¬μ©μκ°€ μ ‘κ·Όν•λ” μ»¨ν…μΈ  / μ‚¬μ΄νΈλ¥Ό μ ν•ν•  μ μλ‹¤.
  - IP μ—­μ¶”μ μ„ λ°©μ§€ν•  μ μλ‹¤.
- λ¦¬λ²„μ¤ ν”„λ΅μ‹
  - μ„λ²„κ°€ μ§μ ‘μ μΌλ΅ λ…Έμ¶(IP λ“±)λμ§€ μ•μ•„ DDosλ΅ λ¶€ν„° μ•μ „ (λ‹¨, λ¦¬λ²„μ¤ ν”„λ΅μ‹κ°€ κ³µκ²© νƒ€κ²μ΄ λ  μ μλ‹¤.)
  - λ΅λ“λ°Έλ°μ‹±μΌλ΅ μ„λ²„μ κ³Όλ¶€ν•λ¥Ό λ§‰μ„ μ μλ‹¤.
  - κ³µν†µμ μΈ μ²λ¦¬μ— λ€ν•΄μ„ μ„λ²„μ λ¶€λ‹΄μ„ λμ–΄μ¤„ μ μλ‹¤. SSL μ•”νΈν™” / λ΅κΉ… λ“±μ„ λ¦¬λ²„μ¤ ν”„λ΅μ‹κ°€ ν•΄μ¤μΌλ΅μ„
  - μΊμ‹±μ„ ν†µν•΄ μ„±λ¥ ν–¥μƒμ„ κΈ°λ€ν•  μ μλ”°. CDN λ“±λ„ λ¦¬λ²„μ¤ ν”„λ΅μ‹μ΄λ‹¤.

# μ¶μ²

- [ν¬μ›λ“ ν”„λ΅μ‹(forward proxy) λ¦¬λ²„μ¤ ν”„λ΅μ‹(reverse proxy) μ μ°¨μ΄](https://www.lesstif.com/system-admin/forward-proxy-reverse-proxy-21430345.html)
- [[Infra] λ¦¬λ²„μ¤ ν”„λ΅μ‹(reverse proxy) μ„λ²„ κ°λ…](https://losskatsu.github.io/it-infra/reverse-proxy/#)
